<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tests setup &mdash; Linux Test Project 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/js/pathTruncator.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Supported systems" href="supported_systems.html" />
    <link rel="prev" title="Installation and tests execution" href="quick_start.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Linux Test Project
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">For users</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Installation and tests execution</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tests setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#library-environment-variables">Library environment variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#environment-variables-for-network-tests">Environment variables for network tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#test-execution-time-and-timeout">Test execution time and timeout</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="supported_systems.html">Supported systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats.html">Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_catalog.html">Test catalog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developers/setup_mailinglist.html">Setting up the Mailing list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/writing_tests.html">Writing tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/test_case_tutorial.html">Test case tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/api_c_tests.html">LTP C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/api_shell_tests.html">LTP shell API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/api_network_tests.html">Developing using network API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/api_kvm_tests.html">Developing using KVM API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/ltp_library.html">LTP Library guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/build_system.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/documentation.html">Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For maintainers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../maintainers/patch_review.html">Patch review</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainers/ltp_release_procedure.html">Release process</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Custom Documents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../my-docs/index.html">Welcome to the Project Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Linux Test Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tests setup</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/users/setup_tests.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tests-setup">
<h1>Tests setup<a class="headerlink" href="#tests-setup" title="Permalink to this heading"></a></h1>
<p>The internal LTP library provides a set of features that permits to customize
tests behavior by setting environment variables and using specific tests
arguments.</p>
<section id="library-environment-variables">
<h2>Library environment variables<a class="headerlink" href="#library-environment-variables" title="Permalink to this heading"></a></h2>
<p>Following environment variables are expected to be set by LTP users. Therefore,
with some exceptions, they have <code class="docutils literal notranslate"><span class="pre">LTP_</span></code> prefix. Environment variables with
<code class="docutils literal notranslate"><span class="pre">TST_</span></code> prefix are used inside LTP shell API and should <strong>not</strong> be set by
users.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>KCONFIG_PATH</p></td>
<td><p>The path to the kernel config file, (if not set, it tries the usual paths
<code class="docutils literal notranslate"><span class="pre">/boot/config-RELEASE</span></code> or <code class="docutils literal notranslate"><span class="pre">/proc/config.gz</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>KCONFIG_SKIP_CHECK</p></td>
<td><p>Skip kernel config check if variable set (not set by default)</p></td>
</tr>
<tr class="row-even"><td><p>LTPROOT</p></td>
<td><p>Prefix for installed LTP.  <strong>Should be always set</strong>, since some tests
need it to use data files (<code class="docutils literal notranslate"><span class="pre">LTP_DATAROOT</span></code>). LTP is by default installed
into <code class="docutils literal notranslate"><span class="pre">/opt/ltp</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>LTP_COLORIZE_OUTPUT</p></td>
<td><p>By default LTP colorizes it’s output unless it’s redirected to a pipe or
file. Force colorized output behavior: <code class="docutils literal notranslate"><span class="pre">y</span></code> or <code class="docutils literal notranslate"><span class="pre">1</span></code>: always colorize,
<code class="docutils literal notranslate"><span class="pre">n</span></code> or <code class="docutils literal notranslate"><span class="pre">0</span></code>: never colorize.</p></td>
</tr>
<tr class="row-even"><td><p>LTP_DEV</p></td>
<td><p>Path to the block device to be used. C Language: <code class="docutils literal notranslate"><span class="pre">.needs_device</span> <span class="pre">=</span> <span class="pre">1</span></code>.
Shell language: <code class="docutils literal notranslate"><span class="pre">TST_NEEDS_DEVICE=1</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>LTP_SINGLE_FS_TYPE</p></td>
<td><p>Testing only - specifies filesystem instead all supported
(for tests with <code class="docutils literal notranslate"><span class="pre">.all_filesystems</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>LTP_DEV_FS_TYPE</p></td>
<td><p>Filesystem used for testing (default: <code class="docutils literal notranslate"><span class="pre">ext2</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p>LTP_TIMEOUT_MUL</p></td>
<td><p>Multiplies timeout, must be number &gt;= 0.1 (&gt; 1 is useful for slow
machines to avoid unexpected timeout). It’s mainly for shell API, which
does not have LTP_RUNTIME_MUL. In C API it scales the default 30 sec
safety margin, probably LTP_RUNTIME_MUL should be used instead.</p></td>
</tr>
<tr class="row-even"><td><p>LTP_RUNTIME_MUL</p></td>
<td><p>Multiplies maximal test iteration runtime. Tests that run for more than a
second or two are capped on runtime. You can scale the default runtime
both up and down with this multiplier. This is not yet implemented in the
shell API.</p></td>
</tr>
<tr class="row-odd"><td><p>LTP_IMA_LOAD_POLICY</p></td>
<td><p>Load IMA example policy, see <a class="reference external" href="https://github.com/linux-test-project/ltp/blob/master/testcases/kernel/security/integrity/ima/README.md">testcases/kernel/security/integrity/ima/README.md</a>.</p></td>
</tr>
<tr class="row-even"><td><p>LTP_VIRT_OVERRIDE</p></td>
<td><p>Overrides virtual machine detection in the test library. Setting it to
empty string, tells the library that system is not a virtual machine.
Other possible values are <code class="docutils literal notranslate"><span class="pre">kvm</span></code>, <code class="docutils literal notranslate"><span class="pre">xen</span></code>, <code class="docutils literal notranslate"><span class="pre">zvm</span></code> and <code class="docutils literal notranslate"><span class="pre">microsoft</span></code>
that describe different types supervisors.</p></td>
</tr>
<tr class="row-odd"><td><p>PATH</p></td>
<td><p>It’s required to adjust path: <code class="docutils literal notranslate"><span class="pre">PATH=&quot;$PATH:$LTPROOT/testcases/bin&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>TMPDIR</p></td>
<td><p>Base directory for template directory (C language: <code class="docutils literal notranslate"><span class="pre">.needs_tmpdir</span> <span class="pre">=</span> <span class="pre">1</span></code>
and shell: <code class="docutils literal notranslate"><span class="pre">TST_NEEDS_TMPDIR=1</span></code>). Must be an absolute path (default:
‘/tmp’).</p></td>
</tr>
<tr class="row-odd"><td><p>LTP_NO_CLEANUP</p></td>
<td><p>Disable running test cleanup (defined in <code class="docutils literal notranslate"><span class="pre">TST_CLEANUP</span></code>).
Shell API only.</p></td>
</tr>
<tr class="row-even"><td><p>LTP_ENABLE_DEBUG</p></td>
<td><p>Enable debug info (value <code class="docutils literal notranslate"><span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">y</span></code>). Equivalent of <code class="docutils literal notranslate"><span class="pre">-D</span></code> parameter.</p></td>
</tr>
</tbody>
</table>
<section id="environment-variables-for-network-tests">
<h3>Environment variables for network tests<a class="headerlink" href="#environment-variables-for-network-tests" title="Permalink to this heading"></a></h3>
<p>See <a class="reference external" href="https://github.com/linux-test-project/ltp/blob/master/testcases/network/README.md">testcases/network/README.md</a>.</p>
</section>
</section>
<section id="test-execution-time-and-timeout">
<h2>Test execution time and timeout<a class="headerlink" href="#test-execution-time-and-timeout" title="Permalink to this heading"></a></h2>
<p>The limit on how long a test can run does compose of two parts: <code class="docutils literal notranslate"><span class="pre">runtime</span></code>
and <code class="docutils literal notranslate"><span class="pre">timeout</span></code>. The limit does apply to a single test variant. That means, for
example, that tests which run for all available filesystems will apply this
limit for a single filesystem only.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">runtime</span></code> is a cap on how long the <code class="docutils literal notranslate"><span class="pre">run()</span></code> function can take and for
most testcases this part is set to zero. For tests that do run for more than a
second or two the <code class="docutils literal notranslate"><span class="pre">runtime</span></code> has to be defined and the <code class="docutils literal notranslate"><span class="pre">run()</span></code> function
has to check actively how much runtime is left.</p>
<p>Test runtime can be scaled up and down with <code class="docutils literal notranslate"><span class="pre">LTP_RUNTIME_MUL</span></code> environment
variable or set on a command-line by the <code class="docutils literal notranslate"><span class="pre">-I</span></code> parameter. However,
setting the runtime too low will cause long running tests to exit prematurely,
possibly before having a chance to actually test anything.</p>
<p>The timeout is a limit for test setup and cleanup and it’s also a safety
margin for the runtime accounting. It’s currently set to 30 seconds but it may
change later. If your target machine is too slow, it can be scaled up with the
<code class="docutils literal notranslate"><span class="pre">LTP_TIMEOUT_MUL</span></code> environment variable.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quick_start.html" class="btn btn-neutral float-left" title="Installation and tests execution" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="supported_systems.html" class="btn btn-neutral float-right" title="Supported systems" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Linux Test Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Release process &mdash; Linux Test Project 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/js/pathTruncator.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Welcome to the Project Documentation" href="../my-docs/index.html" />
    <link rel="prev" title="Patch review" href="patch_review.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Linux Test Project
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">For users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../users/quick_start.html">Installation and tests execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users/setup_tests.html">Tests setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users/supported_systems.html">Supported systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users/stats.html">Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users/test_catalog.html">Test catalog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developers/setup_mailinglist.html">Setting up the Mailing list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/writing_tests.html">Writing tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/test_case_tutorial.html">Test case tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/api_c_tests.html">LTP C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/api_shell_tests.html">LTP shell API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/api_network_tests.html">Developing using network API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/api_kvm_tests.html">Developing using KVM API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/ltp_library.html">LTP Library guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/build_system.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/documentation.html">Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For maintainers</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="patch_review.html">Patch review</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Release process</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preparations">Preparations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prepare-the-release-notes">Prepare the release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tag-the-git-and-push-changes-to-github">Tag the git and push changes to github</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prepare-tarballs-and-metadata-documentation">Prepare tarballs and metadata documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#upload-the-generated-files-to-github">Upload the generated files to GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="#send-release-announcement">Send release announcement</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Custom Documents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../my-docs/index.html">Welcome to the Project Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Linux Test Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Release process</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/maintainers/ltp_release_procedure.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="release-process">
<h1>Release process<a class="headerlink" href="#release-process" title="Permalink to this heading"></a></h1>
<section id="preparations">
<h2>Preparations<a class="headerlink" href="#preparations" title="Permalink to this heading"></a></h2>
<p>The release procedure generally takes a few weeks. In the first week or two,
patches that should go into the release are reviewed and possibly merged. These
patches are either fixes or patches pointed out by the community.</p>
<p>Patch review, when finished, is followed by a git freeze, which is a period
where only fixes are pushed to the git. During that period community is
expected to run a LTP pre-release tests, reports problems, and/or send fixes to
the mailing list. In this period we are especially making sure that there are
no regressions in the test results on a wide range of distributions and
architectures.</p>
<p>Once the stabilization period has ended the time has finally come to proceed
with the release.</p>
</section>
<section id="prepare-the-release-notes">
<h2>Prepare the release notes<a class="headerlink" href="#prepare-the-release-notes" title="Permalink to this heading"></a></h2>
<p>Part of the preparation is also to write the release notes, which are then
added to the GitHub release and also sent as announcement to various mailing
lists (see below).</p>
<p>Have a look at <a class="reference external" href="https://lore.kernel.org/ltp/ZGNiQ1sMGvPU_ETp&#64;yuki/">this release letter</a>
to get the idea how it should look.</p>
</section>
<section id="tag-the-git-and-push-changes-to-github">
<h2>Tag the git and push changes to github<a class="headerlink" href="#tag-the-git-and-push-changes-to-github" title="Permalink to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>ltp
<span class="nb">echo</span><span class="w"> </span>YYYYMMDD<span class="w"> </span>&gt;<span class="w"> </span>VERSION
git<span class="w"> </span>commit<span class="w"> </span>-S<span class="w"> </span>-s<span class="w"> </span>-m<span class="w"> </span><span class="s1">&#39;LTP YYYYMMDD&#39;</span><span class="w"> </span>VERSION
git<span class="w"> </span>tag<span class="w"> </span>-s<span class="w"> </span>-a<span class="w"> </span>YYYYMMDD<span class="w"> </span>-m<span class="w"> </span><span class="s1">&#39;LTP YYYYMMDD&#39;</span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>master:master
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>YYYYMMDD
</pre></div>
</div>
<p>The string <code class="docutils literal notranslate"><span class="pre">YYYYMMDD</span></code> should be substituted to the current date.</p>
<p>You can use <a class="reference external" href="https://github.com/linux-test-project/ltp/blob/master/tools/tag-release.sh">tools/tag-release.sh</a> script to have the above automated
process. It allows you to verify the tag before pushing it and does other
checks.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./tools/tag-release.sh
<span class="o">=====</span><span class="w"> </span>git<span class="w"> </span><span class="nv">push</span><span class="w"> </span><span class="o">=====</span>
new<span class="w"> </span>tag:<span class="w"> </span><span class="s1">&#39;YYYYMMDD&#39;</span>,<span class="w"> </span>previous<span class="w"> </span>tag:<span class="w"> </span><span class="s1">&#39;20230127&#39;</span>
tag<span class="w"> </span>YYYYMMDD
Tagger:<span class="w"> </span>Person-who-released<span class="w"> </span>LTP<span class="w"> </span>&lt;foo@example.com&gt;
Date:<span class="w">   </span>...

LTP<span class="w"> </span>YYYYMMDD
-----BEGIN<span class="w"> </span>PGP<span class="w"> </span>SIGNATURE-----
...
-----END<span class="w"> </span>PGP<span class="w"> </span>SIGNATURE-----

commit<span class="w"> </span>3ebc2dfa85c2445bb68d8c0d66e33c4da1e1b3a7
gpg:<span class="w">                </span>using<span class="w"> </span>RSA<span class="w"> </span>key<span class="w"> </span>...
...
Primary<span class="w"> </span>key<span class="w"> </span>fingerprint:<span class="w"> </span>...
Author:<span class="w"> </span>Person-who-released<span class="w"> </span>LTP<span class="w"> </span>&lt;foo@example.com&gt;
Date:<span class="w">   </span>...

<span class="w">    </span>LTP<span class="w"> </span>YYYYMMDD

<span class="w">    </span>Signed-off-by:<span class="w"> </span>Person-who-released<span class="w"> </span>LTP<span class="w"> </span>&lt;foo@example.com&gt;

diff<span class="w"> </span>--git<span class="w"> </span>a/VERSION<span class="w"> </span>b/VERSION
index<span class="w"> </span>af4c41fec..ae488c0e7<span class="w"> </span><span class="m">100644</span>
---<span class="w"> </span>a/VERSION
+++<span class="w"> </span>b/VERSION
@@<span class="w"> </span>-1<span class="w"> </span>+1<span class="w"> </span>@@
-20230127
+YYYYMMDD

Please<span class="w"> </span>check<span class="w"> </span>tag<span class="w"> </span>and<span class="w"> </span>signature.<span class="w"> </span>Proceed?<span class="w"> </span><span class="o">[</span>N/y<span class="o">]</span>:<span class="w"> </span>y
Pushing<span class="w"> </span>changes<span class="w"> </span>to<span class="w"> </span>upstream<span class="w"> </span>git.<span class="w"> </span>Proceed?<span class="w"> </span><span class="o">[</span>N/y<span class="o">]</span>:<span class="w"> </span>y
...
To<span class="w"> </span>github.com:linux-test-project/ltp.git
<span class="w"> </span>*<span class="w"> </span><span class="o">[</span>new<span class="w"> </span>tag<span class="o">]</span><span class="w">             </span>YYYYMMDD<span class="w"> </span>-&gt;<span class="w"> </span>YYYYMMDD
</pre></div>
</div>
</section>
<section id="prepare-tarballs-and-metadata-documentation">
<h2>Prepare tarballs and metadata documentation<a class="headerlink" href="#prepare-tarballs-and-metadata-documentation" title="Permalink to this heading"></a></h2>
<p>The following procedure will show how to create the release archives and the
metadata documentation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># clone already clonned git repository to new folder</span>
<span class="nb">cd</span><span class="w"> </span>..
git<span class="w"> </span>clone<span class="w"> </span>ltp<span class="w"> </span>ltp-full-YYYYMMDD
<span class="nb">cd</span><span class="w"> </span>ltp-full-YYYYMMDD

<span class="c1"># update all submodules</span>
git<span class="w"> </span>submodule<span class="w"> </span>update<span class="w"> </span>--init

<span class="c1"># Generate configure script</span>
make<span class="w"> </span>autotools

<span class="c1"># Generate tarballs</span>
<span class="nb">cd</span><span class="w"> </span>..
tar<span class="w"> </span>-cjf<span class="w"> </span>ltp-full-YYYYMMDD.tar.bz2<span class="w"> </span>ltp-full-YYYYMMDD<span class="w"> </span>--exclude<span class="w"> </span>.git
tar<span class="w"> </span>-cJf<span class="w"> </span>ltp-full-YYYYMMDD.tar.xz<span class="w"> </span>ltp-full-YYYYMMDD<span class="w"> </span>--exclude<span class="w"> </span>.git

<span class="c1"># Generate checksums</span>
md5<span class="w"> </span>ltp-full-YYYYMMDD.tar.xz<span class="w"> </span>&gt;<span class="w"> </span>ltp-full-YYYYMMDD.tar.xz.md5
sha1<span class="w"> </span>ltp-full-YYYYMMDD.tar.xz<span class="w"> </span>&gt;<span class="w"> </span>ltp-full-YYYYMMDD.tar.xz.sha1
sha256sum<span class="w"> </span>ltp-full-YYYYMMDD.tar.xz<span class="w"> </span>&gt;<span class="w"> </span>ltp-full-YYYYMMDD.tar.xz.sha256
</pre></div>
</div>
<p>You can use <a class="reference external" href="https://github.com/linux-test-project/ltp/blob/master/tools/create-tarballs-metadata.sh">tools/create-tarballs-metadata.sh</a> script to have the above
procedure automated. All generated files are placed in the
<code class="docutils literal notranslate"><span class="pre">ltp-release-YYYYMMDD</span></code> directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./tools/create-tarballs-metadata.sh
<span class="o">=====</span><span class="w"> </span>git<span class="w"> </span><span class="nv">clone</span><span class="w"> </span><span class="o">=====</span>
Cloning<span class="w"> </span>into<span class="w"> </span><span class="s1">&#39;ltp-full-YYYYMMDD&#39;</span>...
<span class="k">done</span>.
<span class="o">=====</span><span class="w"> </span>Update<span class="w"> </span><span class="nv">submodules</span><span class="w"> </span><span class="o">=====</span>
Submodule<span class="w"> </span><span class="s1">&#39;tools/kirk&#39;</span><span class="w"> </span><span class="o">(</span>https://github.com/linux-test-project/kirk.git<span class="o">)</span><span class="w"> </span>registered<span class="w"> </span><span class="k">for</span><span class="w"> </span>path<span class="w"> </span><span class="s1">&#39;tools/kirk&#39;</span>
...
<span class="o">=====</span><span class="w"> </span>Generate<span class="w"> </span>configure<span class="w"> </span><span class="nv">script</span><span class="w"> </span><span class="o">=====</span>
sed<span class="w"> </span>-n<span class="w"> </span><span class="s1">&#39;1{s:LTP-:m4_define([LTP_VERSION],[:;s:$:]):;p;q}&#39;</span><span class="w"> </span>VERSION<span class="w"> </span>&gt;<span class="w"> </span>m4/ltp-version.m4
aclocal<span class="w"> </span>-I<span class="w"> </span>m4
...
<span class="o">=====</span><span class="w"> </span>Generate<span class="w"> </span><span class="nv">tarballs</span><span class="w"> </span><span class="o">=====</span>
<span class="o">=====</span><span class="w"> </span>Generate<span class="w"> </span><span class="nv">checksums</span><span class="w"> </span><span class="o">=====</span>
<span class="o">=====</span><span class="w"> </span>Generate<span class="w"> </span>metadata<span class="w"> </span><span class="nv">documentation</span><span class="w"> </span><span class="o">=====</span>
checking<span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span>BSD-compatible<span class="w"> </span>install...<span class="w"> </span>/usr/bin/install<span class="w"> </span>-c
...
Generated<span class="w"> </span>files<span class="w"> </span>are<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s1">&#39;/home/foo/ltp-release-YYYYMMDD&#39;</span>,<span class="w"> </span>upload<span class="w"> </span>them<span class="w"> </span>to<span class="w"> </span>github
</pre></div>
</div>
</section>
<section id="upload-the-generated-files-to-github">
<h2>Upload the generated files to GitHub<a class="headerlink" href="#upload-the-generated-files-to-github" title="Permalink to this heading"></a></h2>
<p>Go to <a class="reference external" href="https://github.com/linux-test-project/ltp/tags">tags</a>. Click on <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">release</span> <span class="pre">notes</span></code>.
There should be <code class="docutils literal notranslate"><span class="pre">Attach</span> <span class="pre">binaries</span> <span class="pre">...</span></code> link at the bottom of the page.</p>
<p>Don’t forget to upload checksums for the tarballs and metadata documentation
as well.</p>
</section>
<section id="send-release-announcement">
<h2>Send release announcement<a class="headerlink" href="#send-release-announcement" title="Permalink to this heading"></a></h2>
<p>The announcement is sent to:</p>
<ul class="simple">
<li><p>ltp at lists.linux.it</p></li>
<li><p>linux-kernel at vger.kernel.org</p></li>
<li><p>libc-alpha at sourceware.org</p></li>
</ul>
<p>CCed to:</p>
<ul class="simple">
<li><p>lwn at lwn.net</p></li>
<li><p>akpm at linux-foundation.org</p></li>
<li><p>torvalds at linux-foundation.org</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="patch_review.html" class="btn btn-neutral float-left" title="Patch review" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../my-docs/index.html" class="btn btn-neutral float-right" title="Welcome to the Project Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Linux Test Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>